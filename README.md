# vk_thanks_bot
Бот для сообществ Вконтакте. Отправляет сообщения при вступлении в сообщество.

Настройка Callback API:

1. Подготовка серверной части к подключению
Чтобы начать использовать Callback API, подключите свой сервер в настройках сообщества и выберите типы событий, 
данные о которых требуется получать (например, новые комментарии и новые фотографии). 
Для работы с callback API ВКонтакте рекомендует использовать протокол https
Документация ВК - https://vk.com/dev/callback_api


2. Генерация ключа доступа
Перейдем во вкладку "Управление сообществом".
Спустимся в раздел "Работа с API" → "Ключи доступа".
Нажимаем "Создать ключ" и выбираем необходимые права, которые мы предоставим нашему боту.


3. Настройка callback API
Переходим в раздел управления сообщества и спускаемся во вкладку "Работа с API".
Вводим адрес нашего сервера и придумываем секретный ключ.
В качестве ключа выступает любая строка, а в качестве адреса, соотвественно, адрес к php скрипту на сервере.
Введем секретный ключ и нажимаем «Сохранить», после мы должны получить соответствующее уведомление о успешной установке ключа. 
Кнопку «Подтвердить» напротив поля с адресом сервера НЕ нажимаем.
Заданный Вами секретный ключ будет передаваться с каждым уведомлением от сервера в отдельном поле secret. 
Это позволит Вам достоверно определять, что уведомление пришло именно от нашего сервера.
Запоминаем код, который должен вернуть сервер, он понадобится при настройке backend.

4. Настройка типов событий
Перейдем во вкладку "Управление сообществом".
Спустимся в раздел "Работа с API" → "Типы событий".
Устанавливаем необходимые пункты в данном разделе.


5. Настройка backend бота ВКонтакте
Создаем скрипт, который будем принимать запросы от callback API вконтакте 
и определенным образом реагировать на события (см. файл - thanks-bot.php)
Указываем в настройках сообщества адрес к этом скрипту.


Значения переменных в hanks-bot.php:

$confirmation_token - здесь хранится код, который сервер должен вернуть.
$token -  хранит в себе ключ доступа, который мы генерировали в главе «Генерация ключа доступа»
$secretKey - его мы задавали в разделе управления сообщества callback API. 


Спасибо, хабр! 
https://habr.com/ru/post/329150/
